#+TITLE: Octopus 10.0 intelmpi2020

*Warning: under construction / not thoroughly tested yet*
* Dependencies
** preinstalled
** to be installed manually
*** [[file:../../../libs/libxc/4.3.4-intelmpi2020/README.org][libxc 4.3.4 intelmpi2020]]
*** [[file:../../../libs/netcdf/4.7.4-intelmpi2020/README.org][netcdf 4.7.4 intelmpi2020]]
*** optional dependencies not installed
from
~$grep WARNING config.log~
#+begin_example
libvdwxc
PFFT
PNFFT
etsf_io
BerkeleyGW
SPARSKIT
NLOPT
elpa
Libfm
LibYAML
Futile
PSolver
ISF
the poke
PARMETIS support
likwid
#+end_example


* Setup
* Compile
#+BEGIN_SRC sh
module purge
module load intel/compiler/2020 intel/mpi/2020 intel/mkl/2020 lib/fftw3/3.3.8-intelmpi jb/libxc/4.3.4-intelmpi2020 lib/hdf5/1.12.0-intelmpi jb/netcdf/4.7.4-intelmpi2020
export LDFLAGS="-L{$MKLROOT}/lib/intel64 -lmkl_scalapack_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -lmkl_blacs_intelmpi_lp64 -liomp5 -lpthread -lm -ldl"
export CFLAGS="-Ofast -ipo -xHost"
export FCFLAGS="-Ofast -ipo -xHost"
#A combination of -Ofast, -ipo, -static (for static linking),  and -xHost.
export CC=mpiicc
export CXX=mpiicpc
export FC=mpiifort
./configure --prefix='/mnt/home/jbonini/sw/octopus/10-intelmpi2020' --with-libxc-prefix="$LIBXC_BASE" --with-netcdf-prefix="$NETCDF_BASE" --enable-mpi --with-blas=yes --with-lapack=yes --with-blacs=yes
--with-scalapack=yes
#make clean
make -j6
make check?
make install
#+END_SRC
* Configure
